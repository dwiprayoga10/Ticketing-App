
INI MIGRASI LOKASI
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('lokasis', function (Blueprint $table) {
            $table->id();
            $table->string('nama_lokasi');
            $table->string('aktif',1)->default('Y');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('lokasis');
    }
};


SEEDER
<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Support\Facades\DB;
use Illuminate\Database\Seeder;

use function Symfony\Component\Clock\now;

class LokasiSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        DB::table('lokasis')->insert(
            [
                [
                    'nama_lokasi' => 'Stadion Utama',
                    'aktif' =>  'Y',
                    'created_at' => now(),
                    'updated_at' => now(),
    
                ],
                [
                    'nama_lokasi' => 'Galeri Seni Kota',
                    'aktif' =>  'Y',
                    'created_at' => now(),
                    'updated_at' => now(),
    
                ],
                [
                    'nama_lokasi' => 'Taman Kota',
                    'aktif' =>  'Y',
                    'created_at' => now(),
                    'updated_at' => now(),
    
                ],
     

            ]);

            
        }
}


MODEL LOKASI
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;

class Lokasi extends Model
{
    use HasFactory;
    
    protected $fillable = [
        'nama_lokasi',
        'aktif',
    ];

    public function events()
    {
        return $this->hasMany(Event::class);
    }
}


MODEL EVENT
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Event extends Model
{
    use HasFactory;

    protected $fillable = [
        'user_id',
        'judul',
        'deskripsi',
        'tanggal_waktu',
        'lokasi',
        'kategori_id',
        'gambar',
    ];

    protected $casts = [
        'tanggal_waktu' => 'datetime',
    ];

    public function tikets()
    {
        return $this->hasMany(Tiket::class);
    }

    public function kategori()
    {
        return $this->belongsTo(Kategori::class);
    }

    public function user()
    {
        return $this->belongsTo(User::class);
    }
    public function Lokasi()
    {
        return $this->belongsTo(Lokasi::class);
    }
}

CONTROLLER LOKASI
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Lokasi;
use Illuminate\Http\Request;

class LokasiController extends Controller
{
    /** 
     * Tampilkan daftar lokasi 
     */
    public function index()
    {
        $lokasis = Lokasi::orderBy('id', 'desc')->get();
        return view('admin.lokasi.index', compact('lokasis'));
    }

    /** 
     * Form tambah lokasi 
     */
    public function create()
    {
        return view('admin.lokasi.create');
    }

    /** 
     * Simpan data lokasi 
     */
    public function store(Request $request)
    {
        $request->validate([
            'nama_lokasi' => 'required|string|max:255',
        ]);

        Lokasi::create([
            'nama_lokasi' => $request->nama_lokasi,
            'aktif' => $request->aktif ?? 'Y',
        ]);

        return redirect()
            ->route('admin.lokasi.index')
            ->with('success', 'Lokasi berhasil ditambahkan');
    }

    /** 
     * Form edit lokasi 
     */
    public function edit(Lokasi $lokasi)
    {
        return view('admin.lokasi.edit', compact('lokasi'));
    }

    /** 
     * Update data lokasi 
     */
    public function update(Request $request, Lokasi $lokasi)
    {
        $request->validate([
            'nama_lokasi' => 'required|string|max:255',
            'aktif' => 'required|in:Y,N',
        ]);

        $lokasi->update([
            'nama_lokasi' => $request->nama_lokasi,
            'aktif' => $request->aktif,
        ]);

        return redirect()
            ->route('admin.lokasi.index')
            ->with('success', 'Lokasi berhasil diupdate');
    }

    /** 
     * Hapus lokasi 
     */
    public function destroy(Lokasi $lokasi)
    {
        $lokasi->delete();

        return redirect()
            ->route('admin.lokasi.index')
            ->with('success', 'Lokasi berhasil dihapus');
    }
}

SAYA KIRIM INI DULU AKAN SAYA ALNJUT BAGIAN KODE EVENT KAMU DIAM DULU SEBELU PERINTAH SAYA BERI

